â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                â•‘
â•‘         âœ… IMPLEMENTATION CHECKLIST & TESTING GUIDE                             â•‘
â•‘                                                                                â•‘
â•‘         Email + Phone Validation + Automatic Answer Delivery                   â•‘
â•‘                                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ FILE CREATION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create these files in your server directory:

  â˜ server/utils/validators.js
    â†’ Phone validation: exactly 10 digits, no fake numbers
    â†’ Email validation: proper format
    â†’ Fake number detection: sequential, repeated, test numbers
    Location: server/utils/validators.js
    Status: CREATED âœ…

  â˜ server/utils/emailService.js
    â†’ HTML email template generation
    â†’ SMTP, SendGrid, and console (dev) support
    â†’ Email delivery tracking
    Location: server/utils/emailService.js
    Status: CREATED âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ CODE MODIFICATION CHECKLIST - server/index.js
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

There are exactly 5 places to modify server/index.js:

  â˜ CHANGE #1: Add imports (after line 6)
    Add these 2 lines:
    const { sendAnswerEmail } = require('./utils/emailService');
    const { isValidEmail, isValidPhone } = require('./utils/validators');
    
    Verification: Should appear near top with other requires
    Status: [ ] NOT DONE  [ ] IN PROGRESS  [ ] DONE âœ…

  â˜ CHANGE #2: Update questionSchema (around line 62-73)
    Replace entire schema with new version that includes:
    - studentPhone field (match: /^\d{10}$/)
    - emailSent field (type: Boolean, default: false)
    - emailSentAt field (type: Date)
    - emailError field (type: String)
    
    Verification: 
    - Find: const questionSchema = new mongoose.Schema(
    - Should have studentPhone with regex validation
    Status: [ ] NOT DONE  [ ] IN PROGRESS  [ ] DONE âœ…

  â˜ CHANGE #3: Update POST /api/questions (around line 257-277)
    Replace with new version that:
    - Extracts studentPhone from request
    - Validates email using isValidEmail()
    - Validates phone using isValidPhone()
    - Normalizes phone to digits-only format
    - Rejects if neither email nor phone provided
    
    Verification:
    - Should call isValidEmail(studentEmail)
    - Should call isValidPhone(studentPhone)
    - Should save normalized phone as digits: "5551234567"
    Status: [ ] NOT DONE  [ ] IN PROGRESS  [ ] DONE âœ…

  â˜ CHANGE #4: Replace PATCH /api/questions/:id (around line 365-382)
    This is the answer submission endpoint
    Complete replacement with new version that:
    - Validates answerText length (>= 10 chars)
    - Re-validates student email and phone
    - Sends email asynchronously
    - Tracks email delivery status
    - Returns response WITHOUT exposing email/phone to mentor
    
    How to do it:
    1. FIND: app.patch('/api/questions/:id', requireAuth, async (req, res) => {
    2. Copy the ENTIRE function from server/routes/answerSubmission.js
    3. REPLACE the old patch endpoint with the new one
    
    Verification:
    - Should call sendAnswerEmail() for valid email
    - Should update emailSent, emailSentAt fields
    - Should handle email sending asynchronously
    Status: [ ] NOT DONE  [ ] IN PROGRESS  [ ] DONE âœ…

  â˜ CHANGE #5: Replace GET /api/public/resolved (around line 463-497)
    Update to exclude private student data
    Key change: Add .select('-studentEmail -studentPhone -emailError')
    
    Verification:
    - Should have .select('-studentEmail -studentPhone -emailError')
    - Response should NOT include studentEmail
    - Response should NOT include studentPhone
    - Response should include: subject, question, answerText, mentorName
    Status: [ ] NOT DONE  [ ] IN PROGRESS  [ ] DONE âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš™ï¸ ENVIRONMENT CONFIGURATION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Update your .env file:

  DEVELOPMENT (console logging, no real emails):
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â˜ EMAIL_PROVIDER=console
  
  Status: [ ] NOT DONE  [ ] DONE âœ…
  Verification: Emails will log to console, not actually send

  PRODUCTION (SMTP - Gmail, Outlook, etc):
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â˜ EMAIL_PROVIDER=nodemailer
  â˜ SMTP_HOST=smtp.gmail.com
  â˜ SMTP_PORT=587
  â˜ SMTP_SECURE=false
  â˜ SMTP_USER=your-email@gmail.com
  â˜ SMTP_PASSWORD=your-app-password
  â˜ EMAIL_FROM=noreply@youthsolve.com
  
  Status: [ ] NOT DONE  [ ] DONE âœ…
  Setup Guide:
    1. Enable 2FA on your Gmail/email account
    2. Go to https://myaccount.google.com/apppasswords
    3. Create "Mail" app password
    4. Copy the 16-character password
    5. Paste as SMTP_PASSWORD

  PRODUCTION (SendGrid):
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â˜ EMAIL_PROVIDER=sendgrid
  â˜ SENDGRID_API_KEY=SG.xxxxxxxxxxxxx
  â˜ EMAIL_FROM=noreply@youthsolve.com
  
  Status: [ ] NOT DONE  [ ] DONE âœ…
  Setup Guide:
    1. Create SendGrid account: https://sendgrid.com
    2. Generate API key in dashboard
    3. Copy API key
    4. Paste as SENDGRID_API_KEY

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ DEPENDENCY INSTALLATION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

For console email logging only (development):
  â˜ No additional packages needed
    Status: [ ] DONE âœ…

For SMTP email sending (production with Gmail/Outlook/etc):
  â˜ npm install nodemailer
    Verify: npm list nodemailer
    Status: [ ] NOT DONE  [ ] DONE âœ…

For SendGrid email sending (production with SendGrid):
  â˜ npm install @sendgrid/mail
    Verify: npm list @sendgrid/mail
    Status: [ ] NOT DONE  [ ] DONE âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING CHECKLIST - Phone Validation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test 1: Valid phone numbers (should ACCEPT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Phone Input          Expected Result        Test Result
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5551234567          âœ… ACCEPT             [ ] PASS
555-123-4567        âœ… ACCEPT             [ ] PASS
(555) 123-4567      âœ… ACCEPT             [ ] PASS
+1-555-123-4567     âœ… ACCEPT             [ ] PASS
9876543210          âœ… ACCEPT             [ ] PASS

How to test:
  curl -X POST http://localhost:4000/api/questions \
    -H "Content-Type: application/json" \
    -d '{
      "studentName": "Test User",
      "studentEmail": "test@example.com",
      "studentPhone": "5551234567",
      "subject": "Test",
      "question": "Test question?",
      "assignedMentorId": "mentor-id"
    }'
  
  Expected response: 201 Created

Test 2: Invalid phone - Sequential (should REJECT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Phone Input          Expected Error                  Test Result
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1234567890          âŒ REJECT (sequential)          [ ] PASS
0123456789          âŒ REJECT (sequential)          [ ] PASS
9876543210          âŒ REJECT (sequential)          [ ] PASS

How to test:
  Same curl command as above, but with "studentPhone": "1234567890"
  
  Expected response: 400 Bad Request
  Expected message: "Phone number appears to be invalid or a test number"

Test 3: Invalid phone - All same digit (should REJECT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Phone Input          Expected Error                  Test Result
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0000000000          âŒ REJECT (all zeros)           [ ] PASS
1111111111          âŒ REJECT (all ones)            [ ] PASS
2222222222          âŒ REJECT (all twos)            [ ] PASS
5555555555          âŒ REJECT (all fives)           [ ] PASS

Expected response: 400 Bad Request

Test 4: Invalid phone - Wrong length (should REJECT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Phone Input          Expected Error                  Test Result
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
123456789           âŒ REJECT (9 digits)            [ ] PASS
12345678901         âŒ REJECT (11 digits)           [ ] PASS
555-1234            âŒ REJECT (7 digits)            [ ] PASS

Expected response: 400 Bad Request
Expected message: "Phone number must be exactly 10 digits"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING CHECKLIST - Email Validation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test 1: Valid email addresses (should ACCEPT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Email                    Expected Result        Test Result
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
john@example.com        âœ… ACCEPT             [ ] PASS
student@university.edu  âœ… ACCEPT             [ ] PASS
name.last@company.co    âœ… ACCEPT             [ ] PASS

How to test:
  curl -X POST http://localhost:4000/api/questions \
    -H "Content-Type: application/json" \
    -d '{
      "studentName": "Test User",
      "studentEmail": "john@example.com",
      "subject": "Test",
      "question": "Test question?",
      "assignedMentorId": "mentor-id"
    }'
  
  Expected response: 201 Created

Test 2: Invalid email addresses (should REJECT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Email                    Expected Error         Test Result
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
johnexample.com         âŒ REJECT (no @)       [ ] PASS
john@example            âŒ REJECT (no TLD)     [ ] PASS
@example.com            âŒ REJECT (no user)    [ ] PASS
john@.com               âŒ REJECT (no domain)  [ ] PASS

Expected response: 400 Bad Request
Expected message: "Invalid email format"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING CHECKLIST - Answer Submission & Email
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test 1: Mentor submits valid answer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup:
  1. Submit a question with valid email and phone
  2. Note the question ID from response
  
Action:
  curl -X PATCH http://localhost:4000/api/questions/QUESTION_ID \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer mentor-TOKEN" \
    -d '{
      "answerText": "This is a comprehensive answer to your question about...",
      "status": "Resolved"
    }'

Expected Result:
  âœ… 200 OK response
  âœ… Question status changed to "Resolved"
  âœ… answerText saved
  âœ… answeredAt timestamp added
  âœ… Email SENT to student's email
  
Verify in database:
  [ ] emailSent = true
  [ ] emailSentAt = current timestamp
  [ ] emailError = null

Verify in console:
  [ ] Should see email delivery confirmation message

Test Result: [ ] PASS

Test 2: Mentor submits answer with invalid student email
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup:
  1. Submit a question with invalid email (e.g., "john@" or "example.com")
  2. Note the question ID

Action:
  Same PATCH request as above

Expected Result:
  âŒ 400 Bad Request
  âŒ Message: "Cannot submit answer: Invalid email format. Must be a valid email address."
  âŒ Answer NOT saved
  âŒ Status NOT changed

Test Result: [ ] PASS

Test 3: Mentor submits answer with invalid student phone
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup:
  1. Submit a question with invalid phone (e.g., "1234567890" - sequential)
  2. Note the question ID

Action:
  Same PATCH request as above

Expected Result:
  âŒ 400 Bad Request
  âŒ Message: "Cannot submit answer: Phone number appears to be fake or invalid..."
  âŒ Answer NOT saved

Test Result: [ ] PASS

Test 4: Mentor submits answer, student has only phone (no email)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup:
  1. Submit a question with only phone: "5551234567" (no email)
  2. Note the question ID

Action:
  Same PATCH request as above

Expected Result:
  âœ… 200 OK response (email won't be sent, but answer is saved)
  âœ… Question status changed to "Resolved"
  âœ… answerText saved
  
Note: Email is only sent if student has a valid email address

Test Result: [ ] PASS

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING CHECKLIST - Private Data Protection
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test 1: Public API doesn't expose student email
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Action:
  curl http://localhost:4000/api/public/resolved

Expected Result:
  Response should include:
    âœ… question
    âœ… answerText
    âœ… mentorName
    âœ… subject
  
  Response should NOT include:
    âŒ studentEmail (NOT FOUND in response)
    âŒ studentPhone (NOT FOUND in response)
    âŒ studentName (NOT FOUND in response)
    âŒ emailError (NOT FOUND in response)

How to verify:
  Look at response JSON - studentEmail field should not exist

Test Result: [ ] PASS

Test 2: Protected API shows full data (to mentor/admin only)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Action:
  curl http://localhost:4000/api/questions \
    -H "Authorization: Bearer mentor-TOKEN"

Expected Result:
  Response CAN include:
    âœ… studentEmail (visible to authenticated mentor/admin)
    âœ… studentPhone (visible to authenticated mentor/admin)
    âœ… studentName (visible to authenticated mentor/admin)

Verification:
  [ ] Authenticated requests see full data
  [ ] Unauthenticated requests see filtered data

Test Result: [ ] PASS

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING CHECKLIST - Email Sending
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DEVELOPMENT MODE (console logging)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup:
  .env: EMAIL_PROVIDER=console

Action:
  1. Submit a question with valid email
  2. Mentor submits answer

Expected Output in Console:
  ğŸ“§ [EMAIL SERVICE - DEVELOPMENT MODE]
  To: john@example.com
  From: noreply@youthsolve.com
  Subject: Answer from Dr. Sarah Chen to your "JavaScript" question
  [HTML email content...]

Test Result: [ ] PASS

PRODUCTION MODE (SMTP)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup:
  .env configured with SMTP credentials
  npm install nodemailer (if not already installed)

Action:
  1. Submit a question with valid email
  2. Mentor submits answer

Expected Result:
  âœ… Email received in student's inbox
  âœ… Email contains question and answer
  âœ… Email shows mentor name and subject
  âœ… emailSent field in database = true

How to verify:
  [ ] Check student's email inbox
  [ ] Email subject includes mentor name
  [ ] Email body includes both Q and A
  [ ] Database field emailSent = true

Test Result: [ ] PASS

PRODUCTION MODE (SendGrid)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup:
  .env configured with SendGrid API key
  npm install @sendgrid/mail (if not already installed)

Action:
  Same as SMTP test above

Expected Result:
  Same as SMTP test above

Test Result: [ ] PASS

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… FINAL VERIFICATION CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before marking as COMPLETE:

Code Integration:
  â˜ All 2 import statements added to server/index.js
  â˜ questionSchema updated with new fields
  â˜ POST /api/questions endpoint replaced
  â˜ PATCH /api/questions/:id endpoint replaced
  â˜ GET /api/public/resolved endpoint updated

Files:
  â˜ server/utils/validators.js exists
  â˜ server/utils/emailService.js exists
  â˜ Dependencies installed (nodemailer or @sendgrid/mail)

Configuration:
  â˜ .env has EMAIL_PROVIDER setting
  â˜ SMTP credentials configured (if using SMTP)
  â˜ SendGrid API key configured (if using SendGrid)

Testing:
  â˜ Phone validation works (accepts valid, rejects fake)
  â˜ Email validation works
  â˜ Answer submission triggers email
  â˜ Public API hides email/phone
  â˜ Private API shows email/phone to authenticated users

Documentation:
  â˜ Developers know how to test locally
  â˜ Developers know how to configure production
  â˜ Team aware of new fields in database

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‰ IMPLEMENTATION COMPLETE!

Once all items are checked:
  1. Commit changes to git
  2. Deploy to staging/production
  3. Test in production environment
  4. Monitor email delivery logs
  5. Gather user feedback

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
